/*! @fms-cat/wavenerd-deck v0.1.1 - (c) FMS-Cat, MIT License */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.WAVENERD_DECK=t():e.WAVENERD_DECK=t()}(this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function _(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,_)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:_(0),throw:_(1),return:_(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function _(o){return function(_){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,_])}}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.WavenerdDeck=void 0;var a=r(4),_=r(6),u=r(7),s=r(1),f=r(2),c=function(){function e(e){var t=this,r=e.glCat,n=e.audio,i=e.hostDeck,o=e.bufferSize,u=e.chunkSize,s=e.bpm,f=e.timeErrorThreshold;this.__cueStatus="none",this.__chunkHead=0,this.__time=0,this.__program=null,this.__programCue=null,this.__samples=new Map,this.timeErrorThreshold=null!=f?f:.01,this.__bufferSize=null!=o?o:2048,this.__chunkSize=null!=u?u:64,i&&(this.hostDeck=i),this.__beatManager=new a.BeatManager,this.__beatManager.bpm=null!=s?s:140,this.__beatManager.on("changeBPM",(function(e){var r=e.bpm;t.__chunkHead=0,t.__emit("changeBPM",{bpm:r})})),this.__glCat=r,this.__bufferQuad=this.__glCat.createBuffer(),this.__bufferQuad.setVertexbuffer(new Float32Array([-1,-1,1,-1,-1,1,1,1])),this.__framebufferTexture=this.__glCat.createTexture(),this.__framebufferTexture.setTextureFromFloatArray(this.__bufferSize/2,this.__chunkSize,null,_.GL.RGBA),this.__framebuffer=this.__glCat.createFramebuffer(),this.__framebuffer.attachTexture(this.__framebufferTexture),this.__pixelBuffer=new Float32Array(2*this.__bufferSize*this.__chunkSize),this.__audio=n,this.__node=n.createScriptProcessor(this.__bufferSize,2,2),this.__node.onaudioprocess=function(e){return t.__handleProcess(e)}}return Object.defineProperty(e.prototype,"cueStatus",{get:function(){return this.__cueStatus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this.__bufferSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chunkSize",{get:function(){return this.__chunkSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bpm",{get:function(){return this.beatManager.bpm},set:function(e){this.beatManager.bpm=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){return this.hostDeck?this.hostDeck.time:this.__time},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"glCat",{get:function(){return this.__glCat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastError",{get:function(){return this.__lastError},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audio",{get:function(){return this.__audio},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"node",{get:function(){return this.__node},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sampleRate",{get:function(){return this.__audio.sampleRate},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"beatManager",{get:function(){var e,t=null===(e=this.hostDeck)||void 0===e?void 0:e.beatManager;return t||this.__beatManager},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"samples",{get:function(){return this.hostDeck?this.hostDeck.samples:this.__samples},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this.__setCueStatus("none"),this.__bufferQuad.dispose(),this.__program&&this.__program.program.dispose(!0),this.__programCue&&this.__programCue.program.dispose(!0)},e.prototype.compile=function(e){return n(this,void 0,Promise,(function(){var t,r,n,a,_,s,f,c=this;return i(this,(function(i){switch(i.label){case 0:return[4,this.__glCat.lazyProgramAsync("attribute vec2 p;\nvoid main() {\n  gl_Position = vec4( p, 0.0, 1.0 );\n}\n",u.shaderchunkPre+e+u.shaderchunkPost).catch((function(e){var t=c.__processErrorMessage(e);throw c.__lastError=t,c.__programCue=null,c.__setCueStatus("none"),c.__emit("error",{error:t}),new Error(null!=t?t:void 0)}))];case 1:t=i.sent(),r=new Set;try{for(n=o(this.samples.keys()),a=n.next();!a.done;a=n.next())_=a.value,-1!==e.search("sample_"+_)&&r.add(_)}catch(e){s={error:e}}finally{try{a&&!a.done&&(f=n.return)&&f.call(n)}finally{if(s)throw s.error}}return this.__programCue={program:t,code:e,requiredSamples:r},this.__setCueStatus("ready"),this.__emit("error",{error:null}),this.__lastError=null,[2]}}))}))},e.prototype.applyCue=function(){"ready"===this.__cueStatus&&this.__setCueStatus("applying")},e.prototype.loadSample=function(e,t){return n(this,void 0,Promise,(function(){var r=this;return i(this,(function(n){return this.__audio.decodeAudioData(t).then((function(t){for(var n=t.sampleRate,i=t.duration,o=t.length,a=Math.ceil(o/2048),u=new Float32Array(2048*a*4),s=t.numberOfChannels,f=t.getChannelData(0),c=t.getChannelData(1===s?0:1),l=0;l<o;l++)u[4*l+0]=f[l],u[4*l+1]=c[l];var E=r.__glCat.createTexture();E.setTextureFromFloatArray(2048,a,u,_.GL.RGBA),E.textureFilter(_.GL.NEAREST),r.__samples.set(e,{name:e,texture:E,sampleRate:n,duration:i}),r.__program&&r.__program.code.search("sample_"+e)&&r.__program.requiredSamples.add(e),r.__programCue&&r.__programCue.code.search("sample_"+e)&&r.__programCue.requiredSamples.add(e),r.__emit("loadSample",{name:e,duration:i,sampleRate:n})})),[2]}))}))},e.prototype.deleteSample=function(e){this.__samples.has(e)&&(this.__samples.delete(e),this.__emit("deleteSample",{name:e}))},e.prototype.__handleProcess=function(e){var t=this.time;this.hostDeck||(t+=this.__bufferSize/this.__audio.sampleRate,this.timeErrorThreshold<Math.abs(t-e.playbackTime)&&(t=e.playbackTime)),this.__time=t;var r=this.beatManager.update(t),n=r.bar,i=e.outputBuffer.getChannelData(0),o=e.outputBuffer.getChannelData(1),a=this.sampleRate,_=this.__bufferSize,u="applying"===this.__cueStatus?Math.min(_,Math.floor((1-n)*a)):_;0===this.__chunkHead&&this.__prepareBuffer(r);for(var s=0;s<u;s++){var f=this.__chunkHead*this.__bufferSize*2;i[s]=this.__pixelBuffer[f+2*s+0],o[s]=this.__pixelBuffer[f+2*s+1]}if(u!==_){if(this.__setCueStatus("none"),this.__programCue){var c=this.__program;this.__program=this.__programCue,c&&c.program.dispose(!0),this.__programCue=null,this.__prepareBuffer(r)}this.__chunkHead=0;for(s=u;s<_;s++)i[s]=this.__pixelBuffer[2*s+0],o[s]=this.__pixelBuffer[2*s+1]}this.__chunkHead=(this.__chunkHead+1)%this.__chunkSize,this.__emit("process")},e.prototype.__prepareBuffer=function(e){var t=this,r=e.time,n=e.beat,i=e.bar,o=e.sixteenBar,u=e.bpm,s=a.BeatManager.CalcBeatSeconds(u),f=a.BeatManager.CalcBarSeconds(u),c=a.BeatManager.CalcSixteenBarSeconds(u),l=this.sampleRate,E=this.__bufferSize,p=this.__chunkSize,h=this.__glCat.gl;this.__program&&(this.__glCat.useProgram(this.__program.program),h.viewport(0,0,this.__bufferSize/2,this.__chunkSize),h.bindFramebuffer(h.FRAMEBUFFER,this.__framebuffer.raw),h.blendFunc(_.GL.ONE,_.GL.ZERO),this.samples.forEach((function(e){t.__program.program.uniformTexture("sample_"+e.name,e.texture),t.__program.program.uniform4f("sample_"+e.name+"_meta",e.texture.width,e.texture.height,e.sampleRate,e.duration)})),this.__program.program.attribute("p",this.__bufferQuad,2),this.__program.program.uniform1f("bpm",this.bpm),this.__program.program.uniform1f("_deltaSample",1/l),this.__program.program.uniform1f("_deltaChunk",this.__bufferSize/l),this.__program.program.uniform4f("timeLength",s,f,c,1e16),this.__program.program.uniform4f("_timeHead",n*s,i*f,o*c,r),h.drawArrays(h.TRIANGLE_STRIP,0,4),h.flush(),h.readPixels(0,0,E/2,p,_.GL.RGBA,_.GL.FLOAT,this.__pixelBuffer))},e.prototype.__setCueStatus=function(e){this.__cueStatus=e,this.__emit("changeCueStatus",{cueStatus:e})},e.prototype.__processErrorMessage=function(e){var t=null==e?void 0:e.message;return t?t.replace(/ERROR: (\d+):(\d+)/g,(function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=parseInt(t[1])-u.shaderchunkPreLines+1;return"ERROR: "+t[0]+":"+n})):null},e}();t.WavenerdDeck=c,f.applyMixins(c,[s.EventEmittable])},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmittable=void 0;var i=function(){function e(){}return e.prototype.on=function(e,t){this.__eventListeners=this.__eventListeners||new Map;var r=this.__eventListeners.get(e);return r||(r=[],this.__eventListeners.set(e,r)),r.push(t),t},e.prototype.off=function(e,t){this.__eventListeners=this.__eventListeners||new Map;var r=this.__eventListeners.get(e);r||(r=[],this.__eventListeners.set(e,r));var n=r.indexOf(t);-1!==n&&r.splice(n,1)},e.prototype.__emit=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=n(t,2),o=i[0],a=i[1];this.__eventListeners=this.__eventListeners||new Map,null===(e=this.__eventListeners.get(o))||void 0===e||e.forEach((function(e){return e(a)}))},e}();t.EventEmittable=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyMixins=void 0,t.applyMixins=function(e,t){t.forEach((function(t){Object.getOwnPropertyNames(t.prototype).forEach((function(r){Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r))}))}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);Object.defineProperty(t,"WavenerdDeck",{enumerable:!0,get:function(){return n.WavenerdDeck}});var i=r(0);t.default=i.WavenerdDeck},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeatManager=void 0;var n=r(1),i=r(2),o=r(5),a=function(){function e(){this.__bpm=140,this.__time=0,this.__beat=0,this.__bar=0,this.__sixteenBar=0}return Object.defineProperty(e.prototype,"bpm",{get:function(){return this.__bpm},set:function(e){this.__bpm=e,this.__emit("changeBPM",{bpm:e})},enumerable:!1,configurable:!0}),e.CalcBeatSeconds=function(e){return 60/e},e.CalcBarSeconds=function(e){return 240/e},e.CalcSixteenBarSeconds=function(e){return 3840/e},e.prototype.reset=function(){this.__time=0,this.__beat=0,this.__bar=0,this.__sixteenBar=0},e.prototype.update=function(t){var r=e.CalcBeatSeconds(this.__bpm),n=e.CalcBarSeconds(this.__bpm),i=e.CalcSixteenBarSeconds(this.__bpm),a=t-this.__time;this.__beat=o.mod(this.__beat+a/r,1),this.__bar=o.mod(this.__bar+a/n,1),this.__sixteenBar=o.mod(this.__sixteenBar+a/i,1),this.__time=t;var _={time:t,deltaTime:a,bpm:this.__bpm,beat:this.__beat,bar:this.__bar,sixteenBar:this.__sixteenBar};return this.__emit("update",_),_},e}();t.BeatManager=a,i.applyMixins(a,[n.EventEmittable])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mod=void 0,t.mod=function(e,t){return e-Math.floor(e/t)*t}},function(e,t,r){
/*!
 * @fms-cat/glcat-ts v0.10.0
 * WebGL wrapper with plenty of hackability
 * 
 * Copyright (c) 2019 FMS-Cat
 * @fms-cat/glcat-ts is distributed under the MIT License
 * https://opensource.org/licenses/MIT
 * 
 * Repository: https://github.com/FMS-Cat/glcat-ts
 */
var n;n=function(){return function(e){var t=this.webpackHotUpdate;this.webpackHotUpdate=function(e,r){!function(e,t){if(g[e]&&m[e]){for(var r in m[e]=!1,t)Object.prototype.hasOwnProperty.call(t,r)&&(p[r]=t[r]);0==--d&&0===T&&v()}}(e,r),t&&t(e,r)};var r,n=!0,i="19bf8d566dbd203f09cb",o={},a=[],_=[];function u(e){var t=L[e];if(!t)return S;var n=function(n){return t.hot.active?(L[n]?-1===L[n].parents.indexOf(e)&&L[n].parents.push(e):(a=[e],r=n),-1===t.children.indexOf(n)&&t.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+e),a=[]),S(n)},i=function(e){return{configurable:!0,enumerable:!0,get:function(){return S[e]},set:function(t){S[e]=t}}};for(var o in S)Object.prototype.hasOwnProperty.call(S,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(n,o,i(o));return n.e=function(e){return"ready"===c&&l("prepare"),T++,S.e(e).then(t,(function(e){throw t(),e}));function t(){T--,"prepare"===c&&(R[e]||C(e),0===T&&0===d&&v())}},n.t=function(e,t){return 1&t&&(e=n(e)),S.t(e,-2&t)},n}function s(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:r!==e,active:!0,accept:function(e,r){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._acceptedDependencies[e[n]]=r||function(){};else t._acceptedDependencies[e]=r||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._declinedDependencies[e[r]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var r=t._disposeHandlers.indexOf(e);r>=0&&t._disposeHandlers.splice(r,1)},check:b,apply:y,status:function(e){if(!e)return c;f.push(e)},addStatusHandler:function(e){f.push(e)},removeStatusHandler:function(e){var t=f.indexOf(e);t>=0&&f.splice(t,1)},data:o[e]};return r=void 0,t}var f=[],c="idle";function l(e){c=e;for(var t=0;t<f.length;t++)f[t].call(null,e)}var E,p,h,d=0,T=0,R={},m={},g={};function A(e){return+e+""===e?+e:e}function b(e){if("idle"!==c)throw new Error("check() is only allowed in idle status");return n=e,l("check"),(t=1e4,t=t||1e4,new Promise((function(e,r){if("undefined"==typeof XMLHttpRequest)return r(new Error("No browser support"));try{var n=new XMLHttpRequest,o=S.p+""+i+".hot-update.json";n.open("GET",o,!0),n.timeout=t,n.send(null)}catch(e){return r(e)}n.onreadystatechange=function(){if(4===n.readyState)if(0===n.status)r(new Error("Manifest request to "+o+" timed out."));else if(404===n.status)e();else if(200!==n.status&&304!==n.status)r(new Error("Manifest request to "+o+" failed."));else{try{var t=JSON.parse(n.responseText)}catch(e){return void r(e)}e(t)}}}))).then((function(e){if(!e)return l("idle"),null;m={},R={},g=e.c,h=e.h,l("prepare");var t=new Promise((function(e,t){E={resolve:e,reject:t}}));return p={},C("glcat.js"),"prepare"===c&&0===T&&0===d&&v(),t}));var t}function C(e){g[e]?(m[e]=!0,d++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=S.p+""+e+"."+i+".hot-update.js",document.head.appendChild(t)}(e)):R[e]=!0}function v(){l("ready");var e=E;if(E=null,e)if(n)Promise.resolve().then((function(){return y(n)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var r in p)Object.prototype.hasOwnProperty.call(p,r)&&t.push(A(r));e.resolve(t)}}function y(t){if("ready"!==c)throw new Error("apply() is only allowed in ready status");var r,n,_,u,s;function f(e){for(var t=[e],r={},n=t.map((function(e){return{chain:[e],id:e}}));n.length>0;){var i=n.pop(),o=i.id,a=i.chain;if((u=L[o])&&!u.hot._selfAccepted){if(u.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:o};if(u.hot._main)return{type:"unaccepted",chain:a,moduleId:o};for(var _=0;_<u.parents.length;_++){var s=u.parents[_],f=L[s];if(f){if(f.hot._declinedDependencies[o])return{type:"declined",chain:a.concat([s]),moduleId:o,parentId:s};-1===t.indexOf(s)&&(f.hot._acceptedDependencies[o]?(r[s]||(r[s]=[]),E(r[s],[o])):(delete r[s],t.push(s),n.push({chain:a.concat([s]),id:s})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:r}}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];-1===e.indexOf(n)&&e.push(n)}}t=t||{};var d={},T=[],R={},m=function(){console.warn("[HMR] unexpected require("+C.moduleId+") to disposed module")};for(var b in p)if(Object.prototype.hasOwnProperty.call(p,b)){var C;s=A(b);var v=!1,y=!1,N=!1,U="";switch((C=p[b]?f(s):{type:"disposed",moduleId:b}).chain&&(U="\nUpdate propagation: "+C.chain.join(" -> ")),C.type){case"self-declined":t.onDeclined&&t.onDeclined(C),t.ignoreDeclined||(v=new Error("Aborted because of self decline: "+C.moduleId+U));break;case"declined":t.onDeclined&&t.onDeclined(C),t.ignoreDeclined||(v=new Error("Aborted because of declined dependency: "+C.moduleId+" in "+C.parentId+U));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(C),t.ignoreUnaccepted||(v=new Error("Aborted because "+s+" is not accepted"+U));break;case"accepted":t.onAccepted&&t.onAccepted(C),y=!0;break;case"disposed":t.onDisposed&&t.onDisposed(C),N=!0;break;default:throw new Error("Unexception type "+C.type)}if(v)return l("abort"),Promise.reject(v);if(y)for(s in R[s]=p[s],E(T,C.outdatedModules),C.outdatedDependencies)Object.prototype.hasOwnProperty.call(C.outdatedDependencies,s)&&(d[s]||(d[s]=[]),E(d[s],C.outdatedDependencies[s]));N&&(E(T,[C.moduleId]),R[s]=m)}var P,O=[];for(n=0;n<T.length;n++)s=T[n],L[s]&&L[s].hot._selfAccepted&&R[s]!==m&&O.push({module:s,errorHandler:L[s].hot._selfAccepted});l("dispose"),Object.keys(g).forEach((function(e){!1===g[e]&&function(e){delete installedChunks[e]}(e)}));for(var I,x,M=T.slice();M.length>0;)if(s=M.pop(),u=L[s]){var D={},F=u.hot._disposeHandlers;for(_=0;_<F.length;_++)(r=F[_])(D);for(o[s]=D,u.hot.active=!1,delete L[s],delete d[s],_=0;_<u.children.length;_++){var B=L[u.children[_]];B&&(P=B.parents.indexOf(s))>=0&&B.parents.splice(P,1)}}for(s in d)if(Object.prototype.hasOwnProperty.call(d,s)&&(u=L[s]))for(x=d[s],_=0;_<x.length;_++)I=x[_],(P=u.children.indexOf(I))>=0&&u.children.splice(P,1);for(s in l("apply"),i=h,R)Object.prototype.hasOwnProperty.call(R,s)&&(e[s]=R[s]);var G=null;for(s in d)if(Object.prototype.hasOwnProperty.call(d,s)&&(u=L[s])){x=d[s];var w=[];for(n=0;n<x.length;n++)if(I=x[n],r=u.hot._acceptedDependencies[I]){if(-1!==w.indexOf(r))continue;w.push(r)}for(n=0;n<w.length;n++){r=w[n];try{r(x)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:s,dependencyId:x[n],error:e}),t.ignoreErrored||G||(G=e)}}}for(n=0;n<O.length;n++){var X=O[n];s=X.module,a=[s];try{S(s)}catch(e){if("function"==typeof X.errorHandler)try{X.errorHandler(e)}catch(r){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:s,error:r,originalError:e}),t.ignoreErrored||G||(G=r),G||(G=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:s,error:e}),t.ignoreErrored||G||(G=e)}}return G?(l("fail"),Promise.reject(G)):(l("idle"),new Promise((function(e){e(T)})))}var L={};function S(t){if(L[t])return L[t].exports;var r=L[t]={i:t,l:!1,exports:{},hot:s(t),parents:(_=a,a=[],_),children:[]};return e[t].call(r.exports,r,r.exports,u(t)),r.l=!0,r.exports}return S.m=e,S.c=L,S.d=function(e,t,r){S.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},S.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},S.t=function(e,t){if(1&t&&(e=S(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(S.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)S.d(r,n,function(t){return e[t]}.bind(null,n));return r},S.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return S.d(t,"a",t),t},S.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},S.p="",S.h=function(){return i},u("./src/index.ts")(S.s="./src/index.ts")}({"./src/GL.ts":
/*!*******************!*\
  !*** ./src/GL.ts ***!
  \*******************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GL={ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALPHA:6406,ALPHA_BITS:3413,ALWAYS:519,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATTACHED_SHADERS:35717,BACK:1029,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BROWSER_DEFAULT_WEBGL:37444,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,COMPILE_STATUS:35713,COMPRESSED_TEXTURE_FORMATS:34467,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_LOST_WEBGL:37442,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH_ATTACHMENT:36096,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DONT_CARE:4352,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,FASTEST:4353,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GREATER:516,GREEN_BITS:3411,HIGH_FLOAT:36338,HIGH_INT:36341,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE_ALPHA:6410,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_RENDERBUFFER_SIZE:34024,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIRRORED_REPEAT:33648,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NUM_COMPRESSED_TEXTURE_FORMATS:34466,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,RED_BITS:3410,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,REPEAT:10497,REPLACE:7681,RGB:6407,RGB5_A1:32855,RGB565:36194,RGBA:6408,RGBA4:32854,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SHADER_COMPILER:36346,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_CLEAR_VALUE:2961,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,TEXTURE_2D:3553,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,UNPACK_ALIGNMENT:3317,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VIEWPORT:2978,ZERO:0}},"./src/GLCat.ts":
/*!**********************!*\
  !*** ./src/GLCat.ts ***!
  \**********************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./GLCatBuffer */"./src/GLCatBuffer.ts"),i=r(/*! ./GLCatFramebuffer */"./src/GLCatFramebuffer.ts"),o=r(/*! ./GLCatProgram */"./src/GLCatProgram.ts"),a=r(/*! ./GLCatRenderbuffer */"./src/GLCatRenderbuffer.ts"),_=r(/*! ./GLCatShader */"./src/GLCatShader.ts"),u=r(/*! ./GLCatTexture */"./src/GLCatTexture.ts"),s=function(){function e(e){this.__extensionCache={},this.__gl=e,e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA)}return Object.defineProperty(e.prototype,"renderingContext",{get:function(){return this.__gl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gl",{get:function(){return this.__gl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dummyTexture",{get:function(){if(this.__dummyTextureCache)return this.__dummyTextureCache;var t=this.createTexture();if(null===t)throw new Error(e.unexpectedNullDetectedError);return t.setTextureFromArray(1,1,new Uint8Array([255,0,255,255])),this.__dummyTextureCache=t,t},enumerable:!0,configurable:!0}),e.prototype.getExtension=function(e,t){var r=this.__gl;if(this.__extensionCache[e])return this.__extensionCache[e];if(this.__extensionCache[e]=r.getExtension(e),this.__extensionCache[e])return this.__extensionCache[e];if(t)throw new Error('GLCat.getExtension: The extension "'+e+'" is not supported');return null},e.prototype.getExtensions=function(e,t){var r=this;return e.map((function(e){return r.getExtension(e,t)}))},e.prototype.createShader=function(t){var r=this.__gl.createShader(t);if(null===r)throw new Error(e.unexpectedNullDetectedError);return new _.GLCatShader(this,r)},e.prototype.createProgram=function(){var t=this.__gl.createProgram();if(null===t)throw new Error(e.unexpectedNullDetectedError);return new o.GLCatProgram(this,t)},e.prototype.lazyProgram=function(t,r){var n=this.__gl,i=this.createShader(n.VERTEX_SHADER);if(null===i)throw new Error(e.unexpectedNullDetectedError);try{i.compile(t)}catch(e){throw i.dispose(),e}var o=this.createShader(n.FRAGMENT_SHADER);if(null===o)throw i.dispose(),new Error(e.unexpectedNullDetectedError);try{o.compile(r)}catch(e){throw i.dispose(),o.dispose(),e}var a=this.createProgram();if(null===a)throw i.dispose(),o.dispose(),new Error(e.unexpectedNullDetectedError);try{a.link(i,o)}catch(e){throw i.dispose(),o.dispose(),a.dispose(),e}return a},e.prototype.lazyProgramAsync=function(t,r){var n=this.__gl,i=this.createShader(n.VERTEX_SHADER);if(null===i)return Promise.reject(new Error(e.unexpectedNullDetectedError));try{i.compile(t)}catch(e){return i.dispose(),Promise.reject(e)}var o=this.createShader(n.FRAGMENT_SHADER);if(null===o)return i.dispose(),Promise.reject(new Error(e.unexpectedNullDetectedError));try{o.compile(r)}catch(e){return i.dispose(),o.dispose(),Promise.reject(e)}var a=this.createProgram();return null===a?(i.dispose(),o.dispose(),Promise.reject(new Error(e.unexpectedNullDetectedError))):a.linkAsync(i,o).then((function(){return a})).catch((function(e){throw i.dispose(),o.dispose(),a.dispose(),e}))},e.prototype.useProgram=function(e){var t;this.__gl.useProgram((null===(t=e)||void 0===t?void 0:t.raw)||null)},e.prototype.createBuffer=function(){var t=this.__gl.createBuffer();if(null===t)throw new Error(e.unexpectedNullDetectedError);return new n.GLCatBuffer(this,t)},e.prototype.createTexture=function(){var t=this.__gl.createTexture();if(null===t)throw new Error(e.unexpectedNullDetectedError);return new u.GLCatTexture(this,t)},e.prototype.createRenderbuffer=function(){var t=this.__gl.createRenderbuffer();if(null===t)throw new Error(e.unexpectedNullDetectedError);return new a.GLCatRenderbuffer(this,t)},e.prototype.createFramebuffer=function(){var t=this.__gl.createFramebuffer();if(null===t)throw new Error(e.unexpectedNullDetectedError);return new i.GLCatFramebuffer(this,t)},e.prototype.lazyFramebuffer=function(t,r,n){void 0===n&&(n=!1);var i=this.createFramebuffer();if(null===i)throw new Error(e.unexpectedNullDetectedError);var o=this.createRenderbuffer();if(null===o)throw i.dispose(),new Error(e.unexpectedNullDetectedError);o.init(t,r),i.attachRenderbuffer(o);var a=this.createTexture();if(null===a)throw i.dispose(),o.dispose(),new Error(e.unexpectedNullDetectedError);return n?a.setTextureFromFloatArray(t,r,null):a.setTextureFromArray(t,r,null),i.attachTexture(a),i},e.prototype.lazyDrawbuffers=function(t,r,n,i){void 0===i&&(i=!1);var o=this.getExtension("WEBGL_draw_buffers",!0);if(o.MAX_DRAW_BUFFERS_WEBGL<n)throw Error("GLCat: Maximum draw buffers count exceeded");var a=this.createFramebuffer();if(null===a)throw new Error(e.unexpectedNullDetectedError);var _=this.createRenderbuffer();if(null===_)throw a.dispose(),new Error(e.unexpectedNullDetectedError);_.init(t,r),a.attachRenderbuffer(_);for(var u=0;u<n;u++){var s=this.createTexture();if(null===s)throw a.dispose(),_.dispose(),new Error(e.unexpectedNullDetectedError);i?s.setTextureFromFloatArray(t,r,null):s.setTextureFromArray(t,r,null),a.attachTexture(s,o.COLOR_ATTACHMENT0_WEBGL+u)}return a},e.prototype.drawBuffers=function(e){var t=this.getExtension("WEBGL_draw_buffers",!0);if(Array.isArray(e))t.drawBuffersWEBGL(e);else{for(var r=[],n=0;n<e;n++)r[n]=t.COLOR_ATTACHMENT0_WEBGL+n;t.drawBuffersWEBGL(r)}},e.prototype.clear=function(e,t,r,n,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=1),void 0===i&&(i=1);var o=this.__gl;o.clearColor(e,t,r,n),o.clearDepth(i),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT)},e.unexpectedNullDetectedError="GLCat: Unexpected null detected",e}();t.GLCat=s},"./src/GLCatBuffer.ts":
/*!****************************!*\
  !*** ./src/GLCatBuffer.ts ***!
  \****************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./GL */"./src/GL.ts"),i=function(){function e(e,t){this.__glCat=e,this.__buffer=t}return Object.defineProperty(e.prototype,"buffer",{get:function(){return this.__buffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"raw",{get:function(){return this.__buffer},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.__glCat.gl.deleteBuffer(this.__buffer)},e.prototype.setVertexbuffer=function(e,t){void 0===t&&(t=n.GL.STATIC_DRAW);var r=this.__glCat.gl;r.bindBuffer(r.ARRAY_BUFFER,this.__buffer),r.bufferData(r.ARRAY_BUFFER,e,t),r.bindBuffer(r.ARRAY_BUFFER,null)},e.prototype.setIndexbuffer=function(e,t){void 0===t&&(t=n.GL.STATIC_DRAW);var r=this.__glCat.gl;r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.__buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e,t),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null)},e}();t.GLCatBuffer=i},"./src/GLCatFramebuffer.ts":
/*!*********************************!*\
  !*** ./src/GLCatFramebuffer.ts ***!
  \*********************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./GL */"./src/GL.ts"),i=function(){function e(e,t){this.__renderbuffer=null,this.__textureMap={},this.__glCat=e,this.__framebuffer=t}return Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.__framebuffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"raw",{get:function(){return this.__framebuffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderbuffer",{get:function(){return this.__renderbuffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this.__textureMap[n.GL.COLOR_ATTACHMENT0]},enumerable:!0,configurable:!0}),e.prototype.dispose=function(e){void 0===e&&(e=!1);var t=this.__glCat.gl;t.deleteFramebuffer(this.__framebuffer),e&&(this.__renderbuffer&&t.deleteRenderbuffer(this.__renderbuffer.raw),Object.values(this.__textureMap).forEach((function(e){t.deleteTexture(e.raw)})))},e.prototype.getTexture=function(e){return void 0===e&&(e=n.GL.COLOR_ATTACHMENT0),this.__textureMap[e]},e.prototype.attachRenderbuffer=function(e,t){void 0===t&&(t=n.GL.DEPTH_ATTACHMENT);var r=this.__glCat.gl;r.bindFramebuffer(r.FRAMEBUFFER,this.__framebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,t,r.RENDERBUFFER,e.raw),r.bindFramebuffer(r.FRAMEBUFFER,null),this.__renderbuffer=e},e.prototype.attachTexture=function(e,t){void 0===t&&(t=n.GL.COLOR_ATTACHMENT0);var r=this.__glCat.gl;r.bindFramebuffer(r.FRAMEBUFFER,this.__framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,t,r.TEXTURE_2D,e.raw,0),r.bindFramebuffer(r.FRAMEBUFFER,null),this.__textureMap[t]=e},e}();t.GLCatFramebuffer=i},"./src/GLCatProgram.ts":
/*!*****************************!*\
  !*** ./src/GLCatProgram.ts ***!
  \*****************************/
/*! no static exports found */function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,_=o.length;a<_;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! ./GL */"./src/GL.ts"),o=function(){function e(e,t){this.__shaders=null,this.__attribLocationCache={},this.__uniformLocationCache={},this.__uniformTextureUnitMap={},this.__uniformtextureUnitIndex=0,this.__linked=!1,this.__glCat=e,this.__program=t}return Object.defineProperty(e.prototype,"program",{get:function(){return this.__program},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"raw",{get:function(){return this.__program},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shaders",{get:function(){return this.__shaders?this.__shaders.concat():null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLinked",{get:function(){return this.__linked},enumerable:!0,configurable:!0}),e.prototype.dispose=function(e){if(void 0===e&&(e=!1),this.__glCat.gl.deleteProgram(this.__program),e){var t=this.shaders;t&&t.forEach((function(e){e.dispose()}))}},e.prototype.link=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=this.__glCat.gl;if(t.forEach((function(t){return n.attachShader(e.__program,t.raw)})),n.linkProgram(this.__program),this.__linked=n.getProgramParameter(this.__program,n.LINK_STATUS),!this.__linked)throw new Error(n.getProgramInfoLog(this.__program));this.__shaders=t.concat()},e.prototype.linkAsync=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=this.__glCat,i=this.__glCat.gl,o=n.getExtension("KHR_parallel_shader_compile");return t.forEach((function(t){return i.attachShader(e.__program,t.raw)})),i.linkProgram(this.__program),new Promise((function(r,n){var a=function(){if(!o||!0===i.getProgramParameter(e.__program,o.COMPLETION_STATUS_KHR))return e.__linked=i.getProgramParameter(e.__program,i.LINK_STATUS),e.__linked?(e.__shaders=t.concat(),void r()):void n(i.getProgramInfoLog(e.__program));requestAnimationFrame(a)};a()}))},e.prototype.attribute=function(e,t,r,n,o,a,_){void 0===r&&(r=1),void 0===n&&(n=0),void 0===o&&(o=i.GL.FLOAT),void 0===a&&(a=0),void 0===_&&(_=0);var u=this.__glCat.gl,s=this.getAttribLocation(e);if(-1!==s)if(null!==t){u.bindBuffer(u.ARRAY_BUFFER,t.raw),u.enableVertexAttribArray(s),u.vertexAttribPointer(s,r,o,!1,a,_);var f=this.__glCat.getExtension("ANGLE_instanced_arrays");f&&f.vertexAttribDivisorANGLE(s,n),u.bindBuffer(u.ARRAY_BUFFER,null)}else u.disableVertexAttribArray(s)},e.prototype.uniform=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=this["uniform"+t];o.call.apply(o,n([this,e],r))},e.prototype.uniformVector=function(e,t,r){this["uniform"+t].call(this,e,r)},e.prototype.uniform1i=function(e,t){var r=this.__glCat.gl,n=this.getUniformLocation(e);r.uniform1i(n,t)},e.prototype.uniform2i=function(e,t,r){var n=this.__glCat.gl,i=this.getUniformLocation(e);n.uniform2i(i,t,r)},e.prototype.uniform3i=function(e,t,r,n){var i=this.__glCat.gl,o=this.getUniformLocation(e);i.uniform3i(o,t,r,n)},e.prototype.uniform4i=function(e,t,r,n,i){var o=this.__glCat.gl,a=this.getUniformLocation(e);o.uniform4i(a,t,r,n,i)},e.prototype.uniform1iv=function(e,t){var r=this.__glCat.gl,n=this.getUniformLocation(e);r.uniform1iv(n,t)},e.prototype.uniform2iv=function(e,t){var r=this.__glCat.gl,n=this.getUniformLocation(e);r.uniform2iv(n,t)},e.prototype.uniform3iv=function(e,t){var r=this.__glCat.gl,n=this.getUniformLocation(e);r.uniform3iv(n,t)},e.prototype.uniform4iv=function(e,t){var r=this.__glCat.gl,n=this.getUniformLocation(e);r.uniform4iv(n,t)},e.prototype.uniform1f=function(e,t){var r=this.__glCat.gl,n=this.getUniformLocation(e);r.uniform1f(n,t)},e.prototype.uniform2f=function(e,t,r){var n=this.__glCat.gl,i=this.getUniformLocation(e);n.uniform2f(i,t,r)},e.prototype.uniform3f=function(e,t,r,n){var i=this.__glCat.gl,o=this.getUniformLocation(e);i.uniform3f(o,t,r,n)},e.prototype.uniform4f=function(e,t,r,n,i){var o=this.__glCat.gl,a=this.getUniformLocation(e);o.uniform4f(a,t,r,n,i)},e.prototype.uniform1fv=function(e,t){var r=this.__glCat.gl,n=this.getUniformLocation(e);r.uniform1fv(n,t)},e.prototype.uniform2fv=function(e,t){var r=this.__glCat.gl,n=this.getUniformLocation(e);r.uniform2fv(n,t)},e.prototype.uniform3fv=function(e,t){var r=this.__glCat.gl,n=this.getUniformLocation(e);r.uniform3fv(n,t)},e.prototype.uniform4fv=function(e,t){var r=this.__glCat.gl,n=this.getUniformLocation(e);r.uniform4fv(n,t)},e.prototype.uniformMatrix2fv=function(e,t,r){void 0===r&&(r=!1);var n=this.__glCat.gl,i=this.getUniformLocation(e);n.uniformMatrix2fv(i,r,t)},e.prototype.uniformMatrix3fv=function(e,t,r){void 0===r&&(r=!1);var n=this.__glCat.gl,i=this.getUniformLocation(e);n.uniformMatrix3fv(i,r,t)},e.prototype.uniformMatrix4fv=function(e,t,r){void 0===r&&(r=!1);var n=this.__glCat.gl,i=this.getUniformLocation(e);n.uniformMatrix4fv(i,r,t)},e.prototype.uniformTexture=function(e,t){var r,n=this.__glCat.gl,i=this.getUniformLocation(e),o=this.getUniformTextureUnit(e);n.activeTexture(n.TEXTURE0+o),n.bindTexture(n.TEXTURE_2D,(null===(r=t)||void 0===r?void 0:r.raw)||null),n.uniform1i(i,o)},e.prototype.uniformCubemap=function(e,t){var r,n=this.__glCat.gl,i=this.getUniformLocation(e),o=this.getUniformTextureUnit(e);n.activeTexture(n.TEXTURE0+o),n.bindTexture(n.TEXTURE_CUBE_MAP,(null===(r=t)||void 0===r?void 0:r.raw)||null),n.uniform1i(i,o)},e.prototype.getAttribLocation=function(e){var t=this.__glCat.gl;if(void 0!==this.__attribLocationCache[e])return this.__attribLocationCache[e];var r=t.getAttribLocation(this.__program,e);return this.__attribLocationCache[e]=r,r},e.prototype.getUniformLocation=function(e){var t=this.__glCat.gl;if(void 0!==this.__uniformLocationCache[e])return this.__uniformLocationCache[e];var r=t.getUniformLocation(this.__program,e);return this.__uniformLocationCache[e]=r,r},e.prototype.getUniformTextureUnit=function(e){return void 0===this.__uniformTextureUnitMap[e]&&(this.__uniformTextureUnitMap[e]=this.__uniformtextureUnitIndex,this.__uniformtextureUnitIndex++),this.__uniformTextureUnitMap[e]},e}();t.GLCatProgram=o},"./src/GLCatRenderbuffer.ts":
/*!**********************************!*\
  !*** ./src/GLCatRenderbuffer.ts ***!
  \**********************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./GL */"./src/GL.ts"),i=function(){function e(e,t){this.__width=0,this.__height=0,this.__glCat=e,this.__renderbuffer=t}return Object.defineProperty(e.prototype,"renderbuffer",{get:function(){return this.__renderbuffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"raw",{get:function(){return this.__renderbuffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.__width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.__height},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.__glCat.gl.deleteRenderbuffer(this.__renderbuffer)},e.prototype.init=function(e,t,r){void 0===r&&(r=n.GL.DEPTH_COMPONENT16);var i=this.__glCat.gl;i.bindRenderbuffer(i.RENDERBUFFER,this.__renderbuffer),i.renderbufferStorage(i.RENDERBUFFER,r,e,t),i.bindRenderbuffer(i.RENDERBUFFER,null),this.__width=e,this.__height=t},e}();t.GLCatRenderbuffer=i},"./src/GLCatShader.ts":
/*!****************************!*\
  !*** ./src/GLCatShader.ts ***!
  \****************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.__compiled=!1,this.__glCat=e,this.__shader=t}return Object.defineProperty(e.prototype,"shader",{get:function(){return this.__shader},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"raw",{get:function(){return this.__shader},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.__glCat.gl.deleteShader(this.__shader)},e.prototype.isCompiled=function(){return this.__compiled},e.prototype.compile=function(e){var t=this.__glCat.gl;if(t.shaderSource(this.__shader,e),t.compileShader(this.__shader),this.__compiled=t.getShaderParameter(this.__shader,t.COMPILE_STATUS),!this.__compiled)throw new Error(t.getShaderInfoLog(this.__shader))},e}();t.GLCatShader=n},"./src/GLCatTexture.ts":
/*!*****************************!*\
  !*** ./src/GLCatTexture.ts ***!
  \*****************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./GL */"./src/GL.ts"),i=new Uint8Array([0,0,0,0]),o=function(){function e(e,t){this.__width=0,this.__height=0,this.__glCat=e,this.__texture=t,this.textureFilter(n.GL.LINEAR),this.textureWrap(n.GL.CLAMP_TO_EDGE)}return Object.defineProperty(e.prototype,"texture",{get:function(){return this.__texture},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"raw",{get:function(){return this.__texture},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.__width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.__height},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.__glCat.gl.deleteTexture(this.__texture)},e.prototype.textureFilter=function(e,t){void 0===e&&(e=n.GL.NEAREST),void 0===t&&(t=e);var r=this.__glCat.gl;r.bindTexture(r.TEXTURE_2D,this.__texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,t),r.bindTexture(r.TEXTURE_2D,null)},e.prototype.textureWrap=function(e,t){void 0===e&&(e=n.GL.CLAMP_TO_EDGE),void 0===t&&(t=e);var r=this.__glCat.gl;r.bindTexture(r.TEXTURE_2D,this.__texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),r.bindTexture(r.TEXTURE_2D,null)},e.prototype.getParameter=function(e){var t=this.__glCat.gl;t.bindTexture(t.TEXTURE_2D,this.__texture),t.getParameter(e),t.bindTexture(t.TEXTURE_2D,null)},e.prototype.pixelStorei=function(e,t){var r=this.__glCat.gl;r.bindTexture(r.TEXTURE_2D,this.__texture),r.pixelStorei(e,t),r.bindTexture(r.TEXTURE_2D,null)},e.prototype.setTexture=function(e){var t=this.__glCat.gl;t.bindTexture(t.TEXTURE_2D,this.__texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.bindTexture(t.TEXTURE_2D,null),this.__width=e.width,this.__height=e.height},e.prototype.setTextureFromArray=function(e,t,r,i){void 0===i&&(i=n.GL.RGBA);var o=this.__glCat.gl;o.bindTexture(o.TEXTURE_2D,this.__texture),o.texImage2D(o.TEXTURE_2D,0,i,e,t,0,i,o.UNSIGNED_BYTE,r),o.bindTexture(o.TEXTURE_2D,null),this.__width=e,this.__height=t},e.prototype.setTextureFromFloatArray=function(e,t,r,i){void 0===i&&(i=n.GL.RGBA);var o=this.__glCat.gl;this.__glCat.getExtension("OES_texture_float",!0),o.bindTexture(o.TEXTURE_2D,this.__texture),o.texImage2D(o.TEXTURE_2D,0,i,e,t,0,i,o.FLOAT,r),null===this.__glCat.getExtension("OES_texture_float_linear")&&this.textureFilter(o.NEAREST),o.bindTexture(o.TEXTURE_2D,null),this.__width=e,this.__height=t},e.prototype.copyTexture=function(e,t){var r=this.__glCat.gl;r.bindTexture(r.TEXTURE_2D,this.__texture),r.copyTexImage2D(r.TEXTURE_2D,0,r.RGBA,0,0,e,t,0),r.bindTexture(r.TEXTURE_2D,null),this.__width=e,this.__height=t},e.prototype.setCubemap=function(e){var t=this.__glCat.gl;t.bindTexture(t.TEXTURE_CUBE_MAP,this.__texture);for(var r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e[r]);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindTexture(t.TEXTURE_CUBE_MAP,null)},e.prototype.setZeroTexture=function(){this.setTextureFromArray(1,1,i)},e}();t.GLCatTexture=o},"./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no static exports found */function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(/*! ./GL */"./src/GL.ts")),n(r(/*! ./GLCat */"./src/GLCat.ts")),n(r(/*! ./GLCatBuffer */"./src/GLCatBuffer.ts")),n(r(/*! ./GLCatFramebuffer */"./src/GLCatFramebuffer.ts")),n(r(/*! ./GLCatProgram */"./src/GLCatProgram.ts")),n(r(/*! ./GLCatRenderbuffer */"./src/GLCatRenderbuffer.ts")),n(r(/*! ./GLCatShader */"./src/GLCatShader.ts")),n(r(/*! ./GLCatTexture */"./src/GLCatTexture.ts"))}})},e.exports=n()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shaderchunkPost=t.shaderchunkPreLines=t.shaderchunkPre=void 0,t.shaderchunkPre="precision highp float;\n\n#define _PI 3.14159265359\n\nuniform float bpm;\nuniform vec4 timeLength;\nuniform float sampleRate;\nuniform float _deltaSample;\nuniform float _deltaChunk;\nuniform vec4 _timeHead;\n\nvec2 sampleNearest( sampler2D s, vec4 meta, float time ) {\n  if ( meta.w < time ) { return vec2( 0.0 ); }\n  float x = time / meta.x * meta.z;\n  vec2 uv = fract( vec2(\n    x,\n    floor( x ) / meta.y\n  ) ) + 0.5 / meta.xy;\n  return texture2D( s, uv ).xy;\n}\n\n// I have 0% confidence that the algorithm is perfect\nvec2 sample( sampler2D s, vec4 meta, float time ) {\n  if ( meta.w < time ) { return vec2( 0.0 ); }\n  vec2 sum = vec2( 0.0 );\n  float def = 0.5 - fract( time * meta.z );\n  for ( int i = -5; i <= 5; i ++ ) {\n    float x = floor( time * meta.z + float( i ) ) / meta.x;\n    float deft = def + float( i );\n    vec2 uv = fract( vec2(\n      x,\n      floor( x ) / meta.y\n    ) ) + 0.5 / meta.xy;\n    sum += texture2D( s, uv ).xy * min( sin( deft * _PI ) / deft / _PI, 1.0 );\n  }\n  return sum;\n}\n",t.shaderchunkPreLines=t.shaderchunkPre.split("\n").length,t.shaderchunkPost="void main() {\n  float off = floor( gl_FragCoord.x ) * 2.0;\n  vec4 head = _timeHead + _deltaChunk * floor( gl_FragCoord.y );\n  gl_FragColor = vec4(\n    mainAudio( mod( head + ( off ) * _deltaSample, timeLength ) ),\n    mainAudio( mod( head + ( off + 1.0 ) * _deltaSample, timeLength ) )\n  );\n}"}])}));