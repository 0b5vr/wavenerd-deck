// (c) 2020-2022 0b5vr - https://github.com/0b5vr/wavenerd-deck/blob/release/LICENSE
var y=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var O=Object.getOwnPropertyNames;var G=Object.prototype.hasOwnProperty;var H=(i,e,t)=>e in i?y(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var X=(i,e)=>{for(var t in e)y(i,t,{get:e[t],enumerable:!0})},Y=(i,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of O(e))!G.call(i,a)&&a!==t&&y(i,a,{get:()=>e[a],enumerable:!(r=N(e,a))||r.enumerable});return i};var K=i=>Y(y({},"__esModule",{value:!0}),i);var n=(i,e,t)=>(H(i,typeof e!="symbol"?e+"":e,t),t);var f=(i,e,t)=>new Promise((r,a)=>{var s=u=>{try{_(t.next(u))}catch(l){a(l)}},o=u=>{try{_(t.throw(u))}catch(l){a(l)}},_=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);_((t=t.apply(i,e)).next())});var Q={};X(Q,{BeatManager:()=>m,WavenerdDeck:()=>g,default:()=>J});module.exports=K(Q);var E=class{constructor(){n(this,"__eventListeners")}on(e,t){this.__eventListeners=this.__eventListeners||new Map;let r=this.__eventListeners.get(e);return r||(r=[],this.__eventListeners.set(e,r)),r.push(t),t}off(e,t){this.__eventListeners=this.__eventListeners||new Map;let r=this.__eventListeners.get(e);r||(r=[],this.__eventListeners.set(e,r));let a=r.indexOf(t);a!==-1&&r.splice(a,1)}__emit(...[e,t]){var r;this.__eventListeners=this.__eventListeners||new Map,(r=this.__eventListeners.get(e))==null||r.forEach(a=>a(t))}};function S(i,e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{Object.defineProperty(i.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r))})})}function B(i,e){return i-Math.floor(i/e)*e}var m=class{constructor(){n(this,"__bpm",140);n(this,"__time",0);n(this,"__beat",0);n(this,"__bar",0);n(this,"__sixteenBar",0)}static CalcBeatSeconds(e){return 60/e}static CalcBarSeconds(e){return 240/e}static CalcSixteenBarSeconds(e){return 3840/e}get bpm(){return this.__bpm}set bpm(e){let t=this.__bpm;this.__bpm=Math.max(0,e),this.__sixteenBar=this.__sixteenBar*t/this.__bpm,this.__emit("changeBPM",{bpm:this.__bpm})}get beatSeconds(){return m.CalcBeatSeconds(this.__bpm)}get barSeconds(){return m.CalcBarSeconds(this.__bpm)}get sixteenBarSeconds(){return m.CalcSixteenBarSeconds(this.__bpm)}get time(){return this.__time}get beat(){return this.__beat}get bar(){return this.__bar}get sixteenBar(){return this.__sixteenBar}reset(){this.__time=0,this.__sixteenBar=0}update(e){let t=m.CalcBeatSeconds(this.__bpm),r=m.CalcBarSeconds(this.__bpm),a=m.CalcSixteenBarSeconds(this.__bpm),s=e-this.__time;this.__sixteenBar=B(this.__sixteenBar+s,a),this.__bar=B(this.__sixteenBar,r),this.__beat=B(this.__bar,t),this.__time=e;let o={time:e,bpm:this.__bpm,beat:this.__beat,bar:this.__bar,sixteenBar:this.__sixteenBar};return this.__emit("update",o),o}};S(m,[E]);var C=`/* eslint-disable */

const BLOCK_SIZE = 128;
const CHANNELS = 2;
const BUFFER_SIZE_PER_CHANNEL = 65536;

class BufferReaderProcessor extends AudioWorkletProcessor {
  constructor() {
    super();

    this.active = false;
    this.blocks = 0;
    this.buffer = new Float32Array( CHANNELS * BUFFER_SIZE_PER_CHANNEL );

    this.port.onmessage = ( { data } ) => {
      if ( Array.isArray( data ) ) {
        this.buffer.set( ...data );
      } else {
        this.active = data;
      }
    };
  }

  process( inputs, outputs, parameters ) {
    if ( !this.active ) { return true; }

    const buffer = this.buffer;

    const head = ( BLOCK_SIZE * this.blocks ) % BUFFER_SIZE_PER_CHANNEL;

    outputs[ 0 ].forEach( ( ch, iCh ) => {
      const chHead = BUFFER_SIZE_PER_CHANNEL * iCh + head;
      ch.set( buffer.subarray( chHead, chHead + BLOCK_SIZE ) );
    } );

    this.blocks ++;

    this.port.postMessage( this.blocks );

    return true;
  }
}

registerProcessor( 'buffer-reader-processor', BufferReaderProcessor );
`;var q=128,$=2,L=65536,j=new Blob([C],{type:"text/javascript"}),z=URL.createObjectURL(j),R=class extends AudioWorkletNode{constructor(t){super(t,"buffer-reader-processor",{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[$]});n(this,"__readBlocks");this.__readBlocks=0,this.port.onmessage=({data:r})=>{this.__readBlocks=r}}get readBlocks(){return this.__readBlocks}static addModule(t){return t.audioWorklet.addModule(z)}setActive(t){this.port.postMessage(t)}write(t,r,a,s){let o=L*t+q*r%L+a;this.port.postMessage([s,o])}};var F=`#version 300 es

precision highp float;

#define _PI 3.14159265359

uniform float bpm;
uniform vec4 timeLength;
uniform float sampleRate;
uniform float _deltaSample;
uniform vec4 _timeHead;

in float off;

out float outL;
out float outR;

float paramFetch( vec4 param ) {
  return mix( param.x, param.y, exp( -param.z * off * _deltaSample ) );
}

float wavetableNearest( sampler2D w, vec4 meta, vec2 position ) {
  vec2 uv0 = fract( vec2(
    position.x,
    ( floor( fract( position.y ) * ( meta.y - 1.0 ) ) + 0.5 ) / meta.y
  ) );
  vec2 uv1 = uv0 + vec2( 0.0, 1.0 / meta.y );
  return mix(
    texture( w, uv0 ).x,
    texture( w, uv1 ).x,
    fract( position.y * ( meta.y - 1.0 ) )
  );
}

float wavetableSinc( sampler2D w, vec4 meta, vec2 position ) {
  float sum = 0.0;
  float def = -fract( position.x * meta.x );
  for ( int i = -5; i <= 5; i ++ ) {
    float x = floor( position.x * meta.x + float( i ) ) / meta.x;
    float deft = def + float( i );
    vec2 uv0 = fract( vec2(
      x,
      ( floor( fract( position.y ) * ( meta.y - 1.0 ) ) + 0.5 ) / meta.y
    ) );
    vec2 uv1 = uv0 + vec2( 0.0, 1.0 / meta.y );
    sum += mix(
      texture( w, uv0 ).x,
      texture( w, uv1 ).x,
      fract( position.y * ( meta.y - 1.0 ) )
    ) * min( sin( deft * _PI ) / deft / _PI, 1.0 );
  }
  return sum;
}

vec2 sampleNearest( sampler2D s, vec4 meta, float time ) {
  if ( meta.w < time ) { return vec2( 0.0 ); }
  float x = time / meta.x * meta.z;
  vec2 uv = fract( vec2(
    x,
    floor( x ) / meta.y
  ) ) + 0.5 / meta.xy;
  return texture( s, uv ).xy;
}

vec2 sampleSinc( sampler2D s, vec4 meta, float time ) {
  if ( meta.w < time ) { return vec2( 0.0 ); }
  vec2 sum = vec2( 0.0 );
  float def = -fract( time * meta.z );
  for ( int i = -5; i <= 5; i ++ ) {
    float x = floor( time * meta.z + float( i ) ) / meta.x;
    float deft = def + float( i );
    vec2 uv = fract( vec2(
      x,
      floor( x ) / meta.y
    ) ) + 0.5 / meta.xy;
    sum += texture( s, uv ).xy * min( sin( deft * _PI ) / deft / _PI, 1.0 );
  }
  return sum;
}
`,k=F.split(`
`).length,I=`void main() {
  vec2 out2 = mainAudio( mod( _timeHead + off * _deltaSample, timeLength ) );
  outL = out2.x;
  outR = out2.y;
}`;function w(i,e,t,r={}){var x,v;let{extParallel:a,tfVaryings:s,tfBufferMode:o}=r,_=null,u=null,l=null;try{if(_=i.createShader(i.VERTEX_SHADER),i.shaderSource(_,e),i.compileShader(_),!i.getShaderParameter(_,i.COMPILE_STATUS))throw new Error((x=i.getShaderInfoLog(_))!=null?x:void 0);if(u=i.createShader(i.FRAGMENT_SHADER),i.shaderSource(u,t),i.compileShader(u),!i.getShaderParameter(u,i.COMPILE_STATUS))throw new Error((v=i.getShaderInfoLog(u))!=null?v:void 0);return l=i.createProgram(),i.attachShader(l,_),i.attachShader(l,u),s&&i.transformFeedbackVaryings(l,s,o!=null?o:i.SEPARATE_ATTRIBS),i.linkProgram(l),new Promise((h,T)=>{let b=()=>{var d;if(!a||i.getProgramParameter(l,a.COMPLETION_STATUS_KHR)===!0){i.getProgramParameter(l,i.LINK_STATUS)?h(l):(i.deleteProgram(l),T(new Error((d=i.getProgramInfoLog(l))!=null?d:void 0)));return}setTimeout(b,10)};b()})}catch(h){return i.deleteProgram(l),Promise.reject(h)}finally{i.deleteShader(u),i.deleteShader(_)}}var V=128,P=class{constructor(e,t){n(this,"gl");n(this,"blocksPerRender");n(this,"__extParallel");n(this,"__offsetBuffer");n(this,"__tfBuffers");n(this,"__transformFeedback");n(this,"__program");n(this,"__programCue");n(this,"__dstArrays");this.blocksPerRender=t,this.gl=e,this.__extParallel=e.getExtension("KHR_parallel_shader_compile"),this.__offsetBuffer=this.__createOffsetBuffer(),this.__tfBuffers=[this.__createTFBuffer(),this.__createTFBuffer()],this.__transformFeedback=this.__createTransformFeedback(this.__tfBuffers),this.__dstArrays=[new Float32Array(this.framesPerRender),new Float32Array(this.framesPerRender)],this.__program=null,this.__programCue=null}get framesPerRender(){return V*this.blocksPerRender}dispose(){let{gl:e}=this;e.deleteBuffer(this.__offsetBuffer),e.deleteBuffer(this.__tfBuffers[0]),e.deleteBuffer(this.__tfBuffers[1]),e.deleteTransformFeedback(this.__transformFeedback),e.deleteProgram(this.__program),e.deleteProgram(this.__programCue)}compile(e){return f(this,null,function*(){let{gl:t}=this,r=yield w(t,F+e+I,`#version 300 es
void main(){discard;}`,{extParallel:this.__extParallel,tfVaryings:["outL","outR"]}).catch(a=>{throw this.__programCue=null,t.deleteProgram(this.__programCue),a});r!=null&&(this.__programCue=r)})}applyCue(){let{gl:e}=this;if(this.__programCue==null)return;let t=this.__program;this.__program=this.__programCue,t!=null&&e.deleteProgram(t),this.__programCue=null}uniform1f(e,t){let{gl:r,__program:a}=this;if(a==null)return;let s=r.getUniformLocation(a,e);r.useProgram(a),r.uniform1f(s,t),r.useProgram(null)}uniform4f(e,...t){let{gl:r,__program:a}=this;if(a==null)return;let s=r.getUniformLocation(a,e);r.useProgram(a),r.uniform4f(s,...t),r.useProgram(null)}uniformTexture(e,t,r){let{gl:a,__program:s}=this;if(s==null)return;let o=a.getUniformLocation(s,e);a.activeTexture(a.TEXTURE0+t),a.bindTexture(a.TEXTURE_2D,r),a.useProgram(s),a.uniform1i(o,t),a.useProgram(null)}render(e,t){return f(this,null,function*(){let{gl:r,__program:a}=this;if(a==null)return this.__dstArrays;let s=r.getAttribLocation(a,"off");return r.bindBuffer(r.ARRAY_BUFFER,this.__offsetBuffer),r.enableVertexAttribArray(s),r.vertexAttribPointer(s,1,r.FLOAT,!1,0,0),r.useProgram(a),r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,this.__transformFeedback),r.enable(r.RASTERIZER_DISCARD),r.beginTransformFeedback(r.POINTS),r.drawArrays(r.POINTS,e,t),r.endTransformFeedback(),r.disable(r.RASTERIZER_DISCARD),r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),r.useProgram(null),r.bindBuffer(r.ARRAY_BUFFER,this.__tfBuffers[0]),r.getBufferSubData(r.ARRAY_BUFFER,0,this.__dstArrays[0],e,t),r.bindBuffer(r.ARRAY_BUFFER,null),r.bindBuffer(r.ARRAY_BUFFER,this.__tfBuffers[1]),r.getBufferSubData(r.ARRAY_BUFFER,0,this.__dstArrays[1],e,t),r.bindBuffer(r.ARRAY_BUFFER,null),this.__dstArrays})}__createOffsetBuffer(){let{gl:e,framesPerRender:t}=this,r=new Float32Array(t).map((s,o)=>o),a=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),a}__createTFBuffer(){let{gl:e,framesPerRender:t}=this,r=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,t*Float32Array.BYTES_PER_ELEMENT,e.DYNAMIC_COPY),e.bindBuffer(e.ARRAY_BUFFER,null),r}__createTransformFeedback(e){let{gl:t}=this,r=t.createTransformFeedback();return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,r),t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,0,e[0]),t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,1,e[1]),t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),r}};var A=class{constructor(e){n(this,"gl");n(this,"__textures");this.gl=e,this.__textures=new Map}get textureIds(){return this.__textures.keys()}dispose(){let{gl:e}=this;this.__textures.forEach(t=>{e.deleteTexture(t.texture)}),this.__textures.clear()}get(e){var t;return(t=this.__textures.get(e))!=null?t:null}loadWavetable(e,t){let r=t.length/2048,a=new Float32Array(t.length*4);for(let _=0;_<t.length;_++)a[_*4+0]=t[_];let s=this.__uploadTexture(2048,r,a),o={type:"wavetable",width:2048,height:r,texture:s};return this.__textures.set(e,o),o}loadImage(e,t){let r=this.__uploadImageSource(t),a={type:"image",width:t.width,height:t.height,texture:r};return this.__textures.set(e,a),a}loadSample(e,t){let{sampleRate:r,duration:a}=t,s=t.length,o=2048,u=Math.ceil(s/2048),l=new Float32Array(o*u*4),x=t.numberOfChannels,v=t.getChannelData(0),h=t.getChannelData(x===1?0:1);for(let d=0;d<s;d++)l[d*4+0]=v[d],l[d*4+1]=h[d];let T=this.__uploadTexture(o,u,l),b={type:"sample",width:o,height:u,sampleRate:r,duration:a,texture:T};return this.__textures.set(e,b),b}delete(e){let{gl:t}=this,r=this.__textures.get(e);return r==null?!1:(t.deleteTexture(r.texture),this.__textures.delete(e),!0)}__uploadTexture(e,t,r){let{gl:a}=this,s=a.createTexture();return a.bindTexture(a.TEXTURE_2D,s),a.texImage2D(a.TEXTURE_2D,0,a.RGBA32F,e,t,0,a.RGBA,a.FLOAT,r),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.bindTexture(a.TEXTURE_2D,null),s}__uploadImageSource(e){let{gl:t}=this,r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA8,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.bindTexture(t.TEXTURE_2D,null),r}};function M(i,e,t){return i+(e-i)*t}var W=128,g=class{constructor({gl:e,audio:t,hostDeck:r,latencyBlocks:a,blocksPerRender:s,bpm:o}){n(this,"hostDeck");n(this,"latencyBlocks");n(this,"__cueStatus","none");n(this,"__blocksPerRender");n(this,"__isPlaying");n(this,"__lastUpdatedTime");n(this,"__renderer");n(this,"__lastError");n(this,"__audio");n(this,"__node");n(this,"__bufferReaderNode");n(this,"__bufferWriteBlocks");n(this,"__blockOffset");n(this,"__beatManager");n(this,"__program");n(this,"__programCue");n(this,"__programSwapTime");n(this,"__params",new Map);n(this,"__selfTextureStore");this.__isPlaying=!1,this.latencyBlocks=a!=null?a:16,this.__blocksPerRender=s!=null?s:16,r&&(this.hostDeck=r),this.__beatManager=new m,this.__beatManager.bpm=o!=null?o:140,this.__beatManager.on("changeBPM",({bpm:_})=>{this.__emit("changeBPM",{bpm:_})}),this.__lastUpdatedTime=0,r&&r.on("rewind",()=>{this.rewind()}),this.__renderer=new P(e,this.blocksPerRender),this.__selfTextureStore=new A(e),this.__program=null,this.__programCue=null,this.__programSwapTime=null,this.__audio=t,this.__node=t.createGain(),R.addModule(t).then(()=>{this.__bufferReaderNode=new R(t),this.__bufferReaderNode.connect(this.__node)}),this.__bufferWriteBlocks=0,this.__blockOffset=0}get cueStatus(){return this.__cueStatus}get blocksPerRender(){return this.__blocksPerRender}get framesPerRender(){return W*this.__blocksPerRender}get isPlaying(){var e,t;return(t=(e=this.hostDeck)==null?void 0:e.__isPlaying)!=null?t:this.__isPlaying}get bpm(){return this.beatManager.bpm}set bpm(e){this.beatManager.bpm=e}get lastError(){return this.__lastError}get audio(){return this.__audio}get node(){return this.__node}get sampleRate(){return this.__audio.sampleRate}get beatManager(){var t;let e=(t=this.hostDeck)==null?void 0:t.beatManager;return e||this.__beatManager}get params(){return this.__params}get __textureStore(){return this.hostDeck?this.hostDeck.__textureStore:this.__selfTextureStore}dispose(){var e;this.__setCueStatus("none"),this.__renderer.dispose(),this.__selfTextureStore.dispose(),(e=this.__bufferReaderNode)==null||e.disconnect()}play(){this.__isPlaying=!0,this.__emit("play")}pause(){this.__isPlaying=!1,this.__emit("pause")}rewind(){this.__lastUpdatedTime=0,this.__blockOffset=this.__bufferWriteBlocks,this.__beatManager.reset(),this.applyCueImmediately(),this.__emit("rewind")}compile(e){return f(this,null,function*(){this.__setCueStatus("compiling"),yield this.__renderer.compile(e).catch(r=>{let a=this.__processErrorMessage(r);throw this.__programCue=null,this.__setCueStatus("none"),this.__emit("error",{error:a}),this.__lastError=a,new Error(a!=null?a:void 0)});let t=new Set;for(let r of this.__textureStore.textureIds)e.search(r)!==-1&&t.add(r);this.__programCue={code:e,requiredTextures:t},this.__setCueStatus("ready"),this.__emit("error",{error:null}),this.__lastError=null})}applyCue(){this.__cueStatus==="ready"&&(this.__setCueStatus("applying"),this.__programSwapTime=this.beatManager.time-this.beatManager.bar+this.beatManager.barSeconds)}applyCueImmediately(){this.__programCue!=null&&(this.__setCueStatus("none"),this.__renderer.applyCue(),this.__program=this.__programCue,this.__programCue=null,this.__programSwapTime=null)}setParam(e,t,r=50){let a=this.params.get(e);a?(a.target=t,a.factor=r):this.params.set(e,{name:e,target:t,value:t,factor:r}),this.__emit("setParam",{name:e,value:t,factor:r})}loadWavetable(e,t){let r=`wavetable_${e}`;this.__textureStore.loadWavetable(r,t),this.__addRequiredTexture(r),this.__emit("loadWavetable",{name:e})}deleteWavetable(e){this.__textureStore.delete(`wavetable_${e}`)&&this.__emit("deleteWavetable",{name:e})}loadImage(e,t){let r=`image_${e}`;this.__textureStore.loadImage(r,t),this.__addRequiredTexture(r),this.__emit("loadImage",{name:e})}deleteImage(e){this.__textureStore.delete(`image_${e}`)&&this.__emit("deleteImage",{name:e})}loadSample(e,t){return f(this,null,function*(){let r=yield this.__audio.decodeAudioData(t),a=`sample_${e}`,{duration:s,sampleRate:o}=this.__textureStore.loadSample(a,r);this.__addRequiredTexture(a),this.__emit("loadSample",{name:e,duration:s,sampleRate:o})})}deleteSample(e){this.__textureStore.delete(`success_${e}`)&&this.__emit("deleteSample",{name:e})}update(){return f(this,null,function*(){var l;let e=this.__bufferReaderNode;if(e==null)return;let{readBlocks:t}=e,{sampleRate:r,blocksPerRender:a,framesPerRender:s}=this;if((l=this.__bufferReaderNode)==null||l.setActive(this.isPlaying),!this.isPlaying)return;let o=this.__bufferWriteBlocks-t;if(o>this.latencyBlocks)return;o<0&&(this.__bufferWriteBlocks=(Math.floor(t/a)+1)*a);let _=W*(this.__bufferWriteBlocks-this.__blockOffset)/r;this.beatManager.update(_);let u=this.__programSwapTime!=null?Math.floor((this.__programSwapTime-_)*r):1/0;u=Math.min(u,s),u<0&&(this.applyCueImmediately(),u=s),this.__program&&(yield this.__prepareBuffer(0,u)),u<s&&this.__programCue!=null&&(this.applyCueImmediately(),yield this.__prepareBuffer(u,s-u)),this.__bufferWriteBlocks+=this.blocksPerRender,this.__emit("update")})}__addRequiredTexture(e){this.__program&&this.__program.code.search(e)&&this.__program.requiredTextures.add(e),this.__programCue&&this.__programCue.code.search(e)&&this.__programCue.requiredTextures.add(e)}__prepareBuffer(e,t){return f(this,null,function*(){let r=this.__bufferReaderNode;if(r==null)return;let{time:a,beatSeconds:s,barSeconds:o,sixteenBarSeconds:_,beat:u,bar:l,sixteenBar:x}=this.beatManager,{sampleRate:v}=this,h=a-this.__lastUpdatedTime;this.__lastUpdatedTime=a,this.params.forEach(c=>{c.factor<=0?c.value=c.target:c.value=M(c.target,c.value,Math.exp(-c.factor*h)),this.__renderer.uniform4f("param_"+c.name,c.target,c.value,c.factor,0)});let T=0,{requiredTextures:b}=this.__program;for(let c of b){let p=this.__textureStore.get(c);if(p!=null){this.__renderer.uniformTexture(c,T,p.texture),T++;let D=p.type==="sample"?[p.width,p.height,p.sampleRate,p.duration]:[p.width,p.height,0,0];this.__renderer.uniform4f(c+"_meta",...D)}}this.__renderer.uniform1f("bpm",this.bpm),this.__renderer.uniform1f("_deltaSample",1/v),this.__renderer.uniform4f("timeLength",s,o,_,1e16),this.__renderer.uniform4f("_timeHead",u,l,x,a);let[d,U]=yield this.__renderer.render(e,t);r.write(0,this.__bufferWriteBlocks,e,d.subarray(e,e+t)),r.write(1,this.__bufferWriteBlocks,e,U.subarray(e,e+t))})}__setCueStatus(e){this.__cueStatus=e,this.__emit("changeCueStatus",{cueStatus:e})}__processErrorMessage(e){var r;let t=(r=e==null?void 0:e.message)!=null?r:e;return t?t.replace(/ERROR: (\d+):(\d+)/g,(a,...s)=>{let o=parseInt(s[1])-k+1;return`ERROR: ${s[0]}:${o}`}):null}};S(g,[E]);var J=g;
//# sourceMappingURL=wavenerd-deck.cjs.min.js.map
